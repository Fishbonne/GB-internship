{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}
    <form class="form-horizontal" action="/common/" method="post">{% csrf_token %}
        <div class="row">
          <div class="col-sm-12 col-md-5">
              <h1>Статистика упоминаний</h1>
          </div>
          <div class="col-sm-12 col-md-7">
              <input type="submit" class="btn btn-primary h1-button" value="Показать">
          </div>
        </div>
        <br>
        <div class="row">
          <div class="col-sm-6">
              <div class="form-group">
                  <label for="site" class="col-sm-2 control-label">Сайт</label>
                  <div class="col-sm-10">
                      <select class="form-control" id="site" name="site_id">


                          {% for site in sites %}
                            <option value={{ site.id }}
                              {% if site.id == site_id %}
                              selected
                              {% endif %}>{{ site.name }}
                            </option>


                          {% endfor %}
                      </select>
                  </div>
              </div>
          </div>
        </div>
    </form>
    <br>
    <div class="row">
      <div class="col-xs-12">
        <div id="placeholder" style="width:600px;height:300px"></div>
      </div>
    </div>
    <br>
    <table class="table table-striped" id="site">
        <tr>
            <th>Личность</th>
            <th>Рейтинг</th>
        </tr>
        {% for string in general_stat %}
            <tr>
                <td>{{ string.personName }}</td>
                <td>{{ string.rank }}</td>
            </tr>
        {% endfor %}
    </table>
{% endblock content %}

{% block additional_scripts %}
<script src="{% static 'js/flot/jquery.flot.js' %}" charset="utf-8"></script>
<script src="{% static 'js/flot/jquery.flot.categories.js' %}" charset="utf-8"></script>
<script type="text/javascript">
var chart_data = {{chart_data|safe}}
$(function() {
  $.plot("#placeholder", [ chart_data ], {
    series: {
      bars: {
        show: true,
        barWidth: 0.6,
        align: "center"
      }
    },
    xaxis: {
      mode: "categories",
      tickLength: 0
    }
  });
});
</script>
{% endblock additional_scripts %}
